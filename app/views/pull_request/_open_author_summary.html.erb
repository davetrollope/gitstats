<h1 align="center">Open Pull Request Data</h1><h2 align="center">Author Summary</h2>

<% authors = pr_data.map {|pr| pr[:author]}.uniq %>

<!-- We could use ajax to retrieve the data, but we don't want to get different data than
     is shown in the table so this needs to be syncronously loaded.
  -->
<%= column_chart pr_data.pluck(:author,:total), ytitle: "Number of PRs" %>

<%= bar_chart pr_data.pluck(:author,:open_time), xtitle: "Average Time Open (hours)", height: "#{(authors.count*1.25).to_i}px",
              library: {'chartArea': {'width': '80%', 'height': '90%'}}
%>

<table id="open_author_prs" class="table table-condensed table-striped" width="100%">
  <thead><tr align="left">
    <th>Author</th>
    <th>PR Count</th>
    <th>Repo Count</th>
    <th>Open Time<br/><sup>(hours)</sup></th>
  </tr></thead>

  <tbody>
  <% pr_data.each {|author_summary| %>
      <tr>
        <td><%= author_summary[:author] %></td>
        <td><%= author_summary[:total] %></td>
        <td><%= author_summary[:repo_count] %></td>
        <td><%= '%.2f' % author_summary[:open_time] %></td>
      </tr>
  <% } %>
  </tbody>
</table>

<%= render 'init_table', locals: { table_name: 'open_author_prs' } %>